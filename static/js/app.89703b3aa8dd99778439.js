webpackJsonp([0],[,,,,,function(t,e,a){"use strict";e.a={name:"app"}},function(t,e,a){"use strict";e.a={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js PWA"}}}},function(t,e,a){"use strict";(function(t){e.a={name:"hello1",data:function(){return{video:{},canvas:{},captures:[],videoflg:!0,canvasflg:!1,emotionArr:[],count:0,emotion:["anger","contempt","disgust","fear","happiness","neutral","sadness","surprise"],rand:0,emotionNumArr:[]}},mounted:function(){this.$data.rand=Math.floor(8*Math.random()),this.$data.emotionNumArr.push(this.$data.rand),this.video=this.$refs.video;var t={audio:!1,video:!0};navigator.getUserMedia(t,this.successCallback,this.errorCallback)},methods:{successCallback:function(t){this.video.srcObject=t},errorCallback:function(t){alert(t)},makeblobdata:function(t){var e,a,n,r;if(-1===t.indexOf(";base64,"))return e=t.split(","),a=e[0].split(":")[1],n=decodeURIComponent(e[1]),new Blob([n],{type:a});e=t.split(";base64,"),a=e[0].split(":")[1],n=window.atob(e[1]),r=n.length;for(var o=new Uint8Array(r),s=0;s<r;++s)o[s]=n.charCodeAt(s);return new Blob([o],{type:a})},capture:function(){if(this.$data.count>5)return void this.result();this.canvas=this.$refs.canvas;var e=this.video.offsetWidth,a=this.video.offsetHeight;this.canvas.setAttribute("width",e),this.canvas.setAttribute("height",a),this.$data.canvasflg=!0,this.canvas.getContext("2d").drawImage(this.video,0,0,e,a),this.$data.videoflg=!1,this.captures.push(this.canvas.toDataURL("image/png"));var n={};console.log(this.makeblobdata(this.canvas.toDataURL()));var r=this;t.ajax({url:"https://westus.api.cognitive.microsoft.com/emotion/v1.0/recognize?"+t.param(n),beforeSend:function(t){t.setRequestHeader("Content-Type","application/octet-stream"),t.setRequestHeader("Ocp-Apim-Subscription-Key","4dfe28f1041d48e1a36f469e67ec93d6")},type:"POST",data:this.makeblobdata(this.canvas.toDataURL()),processData:!1}).done(function(t){r.$data.count=r.$data.count+1,console.log(t),r.$data.emotionArr.push(t[0].scores),r.$data.canvasflg=!1,r.$data.videoflg=!0,r.$data.rand=Math.floor(8*Math.random()),r.$data.emotionNumArr.push(r.$data.rand)}).fail(function(t){alert("Please try again"),console.log(t),r.$data.canvasflg=!1,r.$data.videoflg=!0})},result:function(){alert("終了")},retry:function(){this.$data.count=0,this.$data.captures=[],this.$data.emotionNumArr=[],this.$data.emotionArr=[],this.$data.videoflg=!0,this.$data.canvasflg=!1,this.$data.rand=Math.floor(8*Math.random())}}}}).call(e,a(22))},function(t,e,a){"use strict";e.a={name:"camera",data:function(){return{video:{},canvas:{},captures:[]}},mounted:function(){var t=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t.video.src=window.URL.createObjectURL(e),t.video.play()})},methods:{capture:function(){alert(navigator.platform),this.canvas=this.$refs.canvas;var t=this.video.offsetWidth,e=this.video.offsetHeight;this.canvas.getContext("2d").drawImage(this.video,0,0,t,e),this.captures.push(this.canvas.toDataURL("image/png"))}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),r=a(11),o=a(15),s=a(27),i=(a.n(s),a(28)),c=(a.n(i),a(29)),v=a.n(c);n.a.use(v.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:o.a,template:"<App/>",components:{App:r.a}})},,function(t,e,a){"use strict";function n(t){a(12)}var r=a(5),o=a(14),s=a(0),i=n,c=s(r.a,o.a,!1,i,null,null);e.a=c.exports},function(t,e){},,function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),a("main",[a("router-view")],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("span",[t._v("Camera App")])])}],o={render:n,staticRenderFns:r};e.a=o},function(t,e,a){"use strict";var n=a(3),r=a(16),o=a(17),s=a(20),i=a(24);n.a.use(r.a),e.a=new r.a({routes:[{path:"/",name:"Hello",component:o.a},{path:"/1",name:"Hello1",component:s.a},{path:"/2",name:"Camera",compomemt:i.a}]})},,function(t,e,a){"use strict";function n(t){a(18)}var r=a(6),o=a(19),s=a(0),i=n,c=s(r.a,o.a,!1,i,null,null);e.a=c.exports},function(t,e){},function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://chat.vuejs.org/",target:"_blank",rel:"noopener"}},[t._v("Vue Community Chat")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank",rel:"noopener"}},[t._v("Docs for This Template")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],o={render:n,staticRenderFns:r};e.a=o},function(t,e,a){"use strict";function n(t){a(21)}var r=a(7),o=a(23),s=a(0),i=n,c=s(r.a,o.a,!1,i,null,null);e.a=c.exports},function(t,e){},,function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.count<3,expression:"count < 3"}],staticClass:"hello"},[a("h2",[t._v("EmoFace")]),t._v(" "),a("v-ons-row",[a("v-ons-col",{attrs:{"vertical-align":"center"}},[a("video",{directives:[{name:"show",rawName:"v-show",value:t.videoflg,expression:"videoflg"}],ref:"video",attrs:{width:"80%",autoplay:"",playsinline:""}}),t._v(" "),a("canvas",{directives:[{name:"show",rawName:"v-show",value:t.canvasflg,expression:"canvasflg"}],ref:"canvas",attrs:{id:"canvas"}})])],1),t._v(" "),a("v-ons-row",[a("v-ons-col",{attrs:{"vertical-align":"center"}},[a("h3",[t._v(t._s(t.emotion[t.rand])+"でsnap")])])],1),t._v(" "),a("v-ons-row",[a("v-ons-col",{attrs:{"vertical-align":"center"}},[a("v-ons-button",{attrs:{disabled:!t.videoflg,id:"snap"},on:{click:function(e){t.capture()}}},[t._v("Snap Photo")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.count>2,expression:"count > 2"}]},[a("h2",[t._v("Result")]),t._v(" "),t._l(t.emotionArr,function(e,n){return a("v-ons-row",{key:n},[a("v-ons-col",{attrs:{"vertical-align":"center"}},[t._v("\n        "+t._s(n+1)+"回目（"+t._s(t.emotion[t.emotionNumArr[n]])+"）： "+t._s(Math.floor(100*e[t.emotion[t.emotionNumArr[n]]]))+" ％\n      ")])],1)}),t._v(" "),a("v-ons-row",[a("v-ons-col",{attrs:{"vertical-align":"center"}},[a("v-ons-button",{on:{click:function(e){t.retry()}}},[t._v("retry")])],1)],1)],2)])},r=[],o={render:n,staticRenderFns:r};e.a=o},function(t,e,a){"use strict";function n(t){a(25)}var r=a(8),o=a(26),s=a(0),i=n,c=s(r.a,o.a,!1,i,null,null);e.a=c.exports},function(t,e){},function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h2",[t._v("Essential Links")]),t._v(" "),a("video",{ref:"video",attrs:{width:"720px",autoplay:"",playsinline:""}})])},r=[],o={render:n,staticRenderFns:r};e.a=o},function(t,e){},function(t,e){}],[9]);
//# sourceMappingURL=app.89703b3aa8dd99778439.js.map